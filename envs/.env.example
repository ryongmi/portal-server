# Portal Server Environment Configuration Example
# Copy this file to .env.local and fill in the actual values

############ SERVER ENV ###########
# 애플리케이션 실행 환경
NODE_ENV=local
# HTTP API 서버 포트 (클라이언트 접근용)
PORT=8200
# TCP 마이크로서비스 포트 (서비스간 통신용)
TCP_PORT=8210
# CORS 허용 도메인 (콤마로 구분)
CORS_ORIGINS="http://localhost:3000, http://127.0.0.1:3000, http://localhost:3200, http://localhost:3210, http://localhost:3300, http://localhost:3310"
# 애플리케이션 이름
APP_NAME=portal-server

############ EXTERNAL SERVICE ENDPOINTS ############
# MSA 서비스 통신 설정 (선택사항)
# AUTH_SERVICE_HOST=auth-server
# AUTH_SERVICE_PORT=8010
# AUTHZ_SERVICE_HOST=authz-server
# AUTHZ_SERVICE_PORT=8110

############ MYSQL ENV ############
# 중앙 인프라 MySQL 서버 (krgeobuk-infrastructure에서 제공)
MYSQL_HOST=krgeobuk-mysql
# MySQL 내부 포트 (컨테이너간 통신용)
MYSQL_PORT=3306
# MySQL 사용자명 (중앙 인프라 dev 사용자)
MYSQL_USER=dev_user
# MySQL 사용자 비밀번호 (krgeobuk-infrastructure/.env의 MYSQL_DEV_USER_PASSWORD와 일치 필요)
MYSQL_PASSWORD=your-mysql-dev-password
# MySQL 데이터베이스 이름 (중앙 인프라 portal_dev)
MYSQL_DATABASE=portal_dev

############ REDIS ENV ############
# 중앙 인프라 Redis 서버 (krgeobuk-infrastructure에서 제공)
REDIS_HOST=krgeobuk-redis
# Redis 내부 포트 (컨테이너간 통신용)
REDIS_PORT=6379
# Redis 비밀번호 (krgeobuk-infrastructure/.env의 REDIS_PASSWORD와 일치 필요)
REDIS_PASSWORD=your-redis-password

############ JWT ENV ############
# JWT 공개키 파일 경로 (auth-server에서 복사)
JWT_ACCESS_PUBLIC_KEY_PATH=./keys/access-public.key

# ============================================================================
# 설정 가이드
# ============================================================================
#
# 중요: portal-server는 중앙 인프라(krgeobuk-infrastructure)를 사용합니다.
#
# 1. 먼저 중앙 인프라를 시작하세요 (필수!):
#    cd ../../krgeobuk-infrastructure/docker-compose/
#    docker-compose up -d
#
# 2. 이 파일을 .env.local로 복사하세요:
#    cp .env.example .env.local
#
# 3. 다음 값들을 krgeobuk-infrastructure/.env와 동일하게 설정하세요:
#    - MYSQL_PASSWORD (MYSQL_DEV_USER_PASSWORD와 일치)
#    - REDIS_PASSWORD (REDIS_PASSWORD와 일치)
#
# 4. JWT 공개키 파일을 auth-server에서 복사하세요:
#    cp ../auth-server/keys/access-public.key ./keys/
#
# 5. portal-server Docker 컨테이너를 시작하세요:
#    npm run docker:local:up
#
# 6. 개발 서버를 시작하세요:
#    npm run start:debug
#
# ============================================================================
# 네트워크 정보
# ============================================================================
#
# portal-server는 다음 네트워크에 연결됩니다:
# - krgeobuk-network: 중앙 인프라 접근 (MySQL, Redis)
# - msa-network: 마이크로서비스 간 통신
# - shared-network: 공유 리소스 접근
#
# 중앙 인프라 서비스:
# - MySQL: krgeobuk-mysql:3306 (portal_dev 데이터베이스)
# - Redis: krgeobuk-redis:6379
#
# ============================================================================
# 포트 정보
# ============================================================================
#
# HTTP API Server: 8200
# TCP Microservice: 8210
#
# ============================================================================
# 서비스 연동
# ============================================================================
#
# portal-server는 다음 서비스들과 통신합니다:
#
# - auth-server (TCP 8010): 사용자 정보 조회
# - authz-server (TCP 8110): 권한 정보 조회
# - 클라이언트들: CORS 설정을 통한 HTTP API 접근
#   - portal-client (3200): 포털 페이지
#   - portal-admin-client (3210): 관리자 페이지
#
# ============================================================================